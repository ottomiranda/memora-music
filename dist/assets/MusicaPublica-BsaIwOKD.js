import{j as e,c as a,t as i,a as o,f as r,g as s,L as t,k as n}from"./index-BX7dOzwF.js";import{r as m}from"./react-vendor-CNyCdty9.js";import{s as d,g as l}from"./sunoAudio-DVR-2vvJ.js";import{b as u,f as c}from"./download-zyTaX_Lh.js";import{L as h}from"./LiquidGlassButtonWhite-DfnPtwi-.js";import{L as b}from"./LiquidGlassButton-B2di3fyG.js";import{a4 as f}from"./ui-vendor-bNvS7E9t.js";import{u as g}from"./i18n-vendor-CvzjU6Pd.js";import{g as N,h as p,i as w,j as v,k as x}from"./utils-vendor-euKWYQ_X.js";import"./radix-vendor-D0itpczX.js";const j={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},D={date:N({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},defaultWidth:"full"}),time:N({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:N({formats:{full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},y={lastWeek:e=>{const a=e.getDay();return"'"+(0===a||6===a?"último":"última")+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},M={code:"pt-BR",formatDistance:(e,a,i)=>{let o;const r=j[e];return o="string"==typeof r?r:1===a?r.one:r.other.replace("{{count}}",String(a)),(null==i?void 0:i.addSuffix)?i.comparison&&i.comparison>0?"em "+o:"há "+o:o},formatLong:D,formatRelative:(e,a,i,o)=>{const r=y[e];return"function"==typeof r?r(a):r},localize:{ordinalNumber:(e,a)=>{const i=Number(e);return"week"===(null==a?void 0:a.unit)?i+"ª":i+"º"},era:p({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},defaultWidth:"wide"}),quarter:p({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:p({values:{narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},defaultWidth:"wide"}),day:p({values:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},defaultWidth:"wide"}),dayPeriod:p({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:v({matchPattern:/^(\d+)[ºªo]?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:w({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},defaultParseWidth:"any"}),quarter:w({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:w({matchPatterns:{narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},defaultParseWidth:"any"}),day:w({matchPatterns:{narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},defaultMatchWidth:"wide",parsePatterns:{short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},defaultParseWidth:"any"}),dayPeriod:w({matchPatterns:{narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function P({progress:i,className:o,showPercentage:r=!1,size:s="md",variant:t="default"}){const n=Math.min(Math.max(i,0),100);return e.jsxDEV("div",{className:a("w-full space-y-1",o),children:[e.jsxDEV("div",{className:a("relative overflow-hidden rounded-full",{sm:"h-1",md:"h-2",lg:"h-3"}[s],{default:"bg-gray-200",gradient:"bg-gradient-to-r from-gray-200 to-gray-300",minimal:"bg-gray-100"}[t]),children:e.jsxDEV("div",{className:a("h-full transition-all duration-300 ease-out rounded-full",{default:"bg-blue-600",gradient:"bg-gradient-to-r from-purple-600 to-blue-600",minimal:"bg-gray-600"}[t]),style:{width:`${n}%`}},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/components/memora/PublicMiniProgress.tsx",lineNumber:46,columnNumber:9},this)},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/components/memora/PublicMiniProgress.tsx",lineNumber:41,columnNumber:7},this),r&&e.jsxDEV("div",{className:"text-xs text-gray-500 text-center",children:[Math.round(n),"%"]},void 0,!0,{fileName:"/Users/otomiranda/Downloads/memora.music/src/components/memora/PublicMiniProgress.tsx",lineNumber:56,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/otomiranda/Downloads/memora.music/src/components/memora/PublicMiniProgress.tsx",lineNumber:40,columnNumber:5},this)}const E={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"},U={primary:"border-memora-primary border-t-transparent",white:"border-white/80 border-t-transparent",glass:"border-white/40 border-t-white/80"},V=({size:i="md",className:o,variant:r="primary"})=>e.jsxDEV("div",{className:a("animate-spin rounded-full border-2",E[i],U[r],o),style:{animation:"spin 1s linear infinite"}},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/components/ui/Spinner.tsx",lineNumber:28,columnNumber:5},void 0);function k({message:i,className:o,variant:r="destructive",showIcon:s=!0}){return e.jsxDEV("div",{className:a("flex items-center gap-2 p-4 rounded-lg border",{default:"bg-gray-50 text-gray-700 border-gray-200",destructive:"bg-red-50 text-red-700 border-red-200",warning:"bg-yellow-50 text-yellow-700 border-yellow-200"}[r],o),role:"alert","aria-live":"assertive","data-testid":"error-message",children:[s&&e.jsxDEV(f,{className:"w-5 h-5 flex-shrink-0"},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/components/ui/ErrorMessage.tsx",lineNumber:36,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm font-medium",children:i},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/components/ui/ErrorMessage.tsx",lineNumber:38,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/otomiranda/Downloads/memora.music/src/components/ui/ErrorMessage.tsx",lineNumber:25,columnNumber:5},this)}function W(){const{id:a}=i(),f=o(),{t:N}=g(),[p,w]=m.useState(null),[v,j]=m.useState(!0),[D,y]=m.useState(null),{currentUrl:E,setCurrentUrl:U,setCurrentTitle:W}=r();m.useEffect(()=>{!async function(){try{if(!a)return void y("ID da música não encontrado");const e=await d.getSongById(a);if(!e.ok)throw new Error("Erro ao carregar música");const i=await e.json();if(!i.isPublic)return void f("/404");w(i),y(null)}catch(e){e instanceof Error?y(e.message):y("Erro desconhecido ao carregar música")}finally{j(!1)}}()},[a,f]),m.useEffect(()=>{D&&s.error(N("error.loadFailed"))},[D,N]);const q=async e=>{if(!p)return;let a="A"===e?p.audioUrlOption1:"B"===e?p.audioUrlOption2:E;if(!a){const e=await(async e=>{try{return await l(e.id)}catch(a){return{playbackUrl:null,downloadUrl:null}}})(p);a=(null==e?void 0:e.downloadUrl)||(null==e?void 0:e.playbackUrl)||null}if(!a)return void s.error(N("error.downloadFailed"));const i=`${p.title}${e?`_${e}`:""}`,o=u(i);try{const e=`${n}/api/download?url=${encodeURIComponent(a)}&filename=${encodeURIComponent(o)}`;await c(e,i)}catch(r){r instanceof Error?y(r.message):y("Erro desconhecido ao carregar música"),s.error(N("error.downloadFailed"))}};return v?e.jsxDEV("div",{className:"flex h-screen items-center justify-center",children:e.jsxDEV(V,{size:"lg"},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:179,columnNumber:9},this)},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:178,columnNumber:7},this):D||!p?e.jsxDEV("div",{className:"flex h-screen items-center justify-center",children:e.jsxDEV(k,{message:D||N("error.songNotFound")},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:187,columnNumber:9},this)},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:186,columnNumber:7},this):e.jsxDEV("div",{className:"container mx-auto min-h-screen max-w-4xl px-4 py-8",children:e.jsxDEV(t,{className:"relative overflow-hidden",children:[e.jsxDEV("div",{className:"absolute inset-0 -z-10",children:e.jsxDEV("div",{className:"h-full w-full bg-gradient-to-br from-purple-500/30 to-pink-500/30 blur-3xl"},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:196,columnNumber:11},this)},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:195,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col items-center gap-8 p-8",children:[e.jsxDEV("div",{className:"flex w-full flex-col items-center gap-4",children:[e.jsxDEV("div",{className:"h-48 w-48 overflow-hidden rounded-full bg-gradient-to-br from-purple-500 to-pink-500",children:e.jsxDEV("img",{src:"/placeholder.svg",alt:p.title,className:"h-full w-full object-cover"},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:202,columnNumber:15},this)},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:201,columnNumber:13},this),e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("h1",{className:"mb-2 text-3xl font-bold",children:p.title},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:210,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-gray-400",children:x(new Date(p.createdAt),"dd 'de' MMMM 'de' yyyy",{locale:M})},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:211,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:209,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-wrap justify-center gap-2",children:[e.jsxDEV(h,{onClick:async()=>{if(!p)return;const e={title:p.title,text:N("share.songMessage",{title:p.title}),url:window.location.href};try{navigator.share?await navigator.share(e):(await navigator.clipboard.writeText(window.location.href),s.success(N("share.linkCopied")))}catch(a){}},children:N("share.share")},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:219,columnNumber:15},this),e.jsxDEV(h,{onClick:async()=>{try{await navigator.clipboard.writeText(window.location.href),s.success(N("share.linkCopied"))}catch(e){}},children:N("share.copyLink")},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:222,columnNumber:15},this),e.jsxDEV(b,{onClick:()=>q("A"),children:N("download.optionA")},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:225,columnNumber:15},this),e.jsxDEV(b,{onClick:()=>q("B"),children:N("download.optionB")},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:228,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:218,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:200,columnNumber:11},this),e.jsxDEV("div",{className:"w-full",children:e.jsxDEV(P,{song:p,onUrlResolved:(e,a)=>{U(e),W(a)}},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:235,columnNumber:13},this)},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:234,columnNumber:11},this),e.jsxDEV("div",{className:"w-full",children:[e.jsxDEV("h2",{className:"mb-4 text-xl font-semibold",children:N("lyrics.title")},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:245,columnNumber:13},this),e.jsxDEV("div",{className:"whitespace-pre-wrap rounded-lg bg-white/10 p-4",children:p.lyrics},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:246,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:244,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:199,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:194,columnNumber:7},this)},void 0,!1,{fileName:"/Users/otomiranda/Downloads/memora.music/src/pages/MusicaPublica.tsx",lineNumber:193,columnNumber:5},this)}export{W as MusicaPublica};
