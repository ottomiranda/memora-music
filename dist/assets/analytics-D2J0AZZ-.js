var e=Object.defineProperty,t=(t,i,a)=>((t,i,a)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a)(t,"symbol"!=typeof i?i+"":i,a);import{C as i,E as a}from"./index-BX7dOzwF.js";import"./react-vendor-CNyCdty9.js";import"./utils-vendor-euKWYQ_X.js";import"./radix-vendor-D0itpczX.js";import"./ui-vendor-bNvS7E9t.js";import"./i18n-vendor-CvzjU6Pd.js";const r=new class{constructor(){t(this,"initialized",!1),t(this,"queue",[]),t(this,"userProperties",{})}async initialize(){try{await this.loadGoogleAnalytics(),await this.initializeCustomAnalytics(),this.processQueue(),this.initialized=!0,i.info({msg:"Analytics initialized successfully"})}catch(e){throw i.error({msg:"Failed to initialize analytics",error:e}),e}}async loadGoogleAnalytics(){const e=a("NEXT_PUBLIC_GA_ID")??a("NEXT_PUBLIC_GA_MEASUREMENT_ID")??a("VITE_GA_ID");if(!e)return;const t=document.createElement("script");t.src=`https://www.googletagmanager.com/gtag/js?id=${e}`,t.async=!0,document.head.appendChild(t),window.dataLayer=window.dataLayer||[],window.gtag=(...e)=>{window.dataLayer.push(e)},window.gtag("js",new Date),window.gtag("config",e)}async initializeCustomAnalytics(){}processQueue(){for(;this.queue.length>0;){const e=this.queue.shift();e&&this.trackEvent(e)}}setUserProperties(e){this.userProperties={...this.userProperties,...e},window.gtag&&window.gtag("set","user_properties",this.userProperties),i.debug({msg:"User properties updated",properties:this.userProperties})}trackEvent(e){this.initialized?(window.gtag&&window.gtag("event",e.action,{event_category:e.category,event_label:e.label,value:e.value,...this.userProperties}),i.debug({msg:"Analytics event tracked",event:e})):this.queue.push(e)}trackPageView(e){this.initialized&&(window.gtag&&window.gtag("event","page_view",{page_path:e.path,page_title:e.title,page_referrer:e.referrer}),i.debug({msg:"Page view tracked",pageView:e}))}trackError(e){this.trackEvent({type:"error",category:"Error",action:e.name,label:e.message,payload:{stack:e.stack},timestamp:Date.now()})}trackPerformance(e){e.forEach(e=>{this.trackEvent({type:"performance",category:"Performance",action:e.name,value:e.duration,payload:{entryType:e.entryType,startTime:e.startTime},timestamp:Date.now()})})}};async function s(){await r.initialize()}export{r as analytics,s as initializeAnalytics};
